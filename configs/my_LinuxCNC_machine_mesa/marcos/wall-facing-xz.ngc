(Side-wall facing in XZ plane â€” assumes X=0, Z=0, caller determine WCS)
o<wall-facing-xz> sub
(begin preamble)
G17  (Select XY plane)
G40  (Compensation off)
G80  (Cancel CANNED cycle)    
G90  (Use ABS mode)
G21  (Units in mm)

G61.1 (Activate EXACT STOP MODE)
G43                 (Activate tool length compensation)

M3 S10000 

#<xEnd>     = #1    (End X position)
#<zFinal>   = #2    (Final Z depth, negative)
#<zStep>    = #3    (Step down increment)
#<feedX>    = #4    (Feedrate for X)
#<feedZ>    = #5    (Feedrate for Z)

#<zRetract> = 5    (Fixed machine Z height for retract)
#<zNow>     = 0     (Start from Z=0)
#<xNow>     = 0     (Start from X=0)

G0 Z#<zRetract>        (Retract to Z safe height as beginnering)
G0 X0                  (Rapid to start X=0)

(debug, #<zNow> , #<zFinal>)
O100 WHILE [#<zNow> GT #<zFinal>] 

(debug, O100)
    #<zNow> = [#<zNow> - #<zStep>]
    
O200 IF [#<zNow> LT #<zFinal>] 
    (debug, O200)
    #<zNow> = #<zFinal>
O200 ENDIF

    G1 Z#<zNow> F#<feedZ>      (Feed to current Z depth)

O201 IF [#<xNow> EQ 0]
    G1 X#<xEnd> F#<feedX>      (Face pass along X til End)
    #<xNow> = #<xEnd>          (Memorize)
O201 ELSE
    G1 X0 F#<feedX>            (Face pass along X til 0)
    #<xNow> = 0                (Memorize)
O201 ENDIF

O100 ENDWHILE

(debug, ENDWHILE)
G0 Z#<zRetract>        (Retract at end)

M05 (Spindle off)

(Stop at zRetract position)
o<wall-facing-xz> endsub
M2